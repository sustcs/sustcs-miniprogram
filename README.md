云函数
`504005`

```js
//client/app.js
wx.cloud.init({
  env: "test-728bbc" //环境id在控制台才能看到
});
```

`404011 504002`
code2Session 在服务端调用
文件存储采用腾讯云cos对象存储sdk/云存储
小程序提供的云存储API不能直接获取目前存储列表（借用数据库），故换用腾讯云

2019-4-8 完成课程逻辑原型设计及页面实现

textarea保存markdown标记后，再使用解析
curl init
upload 403

请求到一堆数据后，归纳整理
直接全部显示还是逐级请求显示
按课程一级分类，在课程中查看时定位到课程一级
1. 主目录进入时，以tab显示，改变后请求下一级，
   课程进入时，定位到tab,
   此方案只需制作一个页面

2. 主目录进入时，以块状显示，点击后进入并请求，新页面
   课程进入时，直接在新页面
   此方案需制作两类页面
若产生二级分类，仍然需要树状显示,且支持折叠显示

多级分类，多次请求进入，页面栈有限
- 树状
- 面包屑

模板template
组件component
插件plugin

图标组件化
[1] 前端[色色].微信小程序——自定义图标组件[EB/OL].https://www.cnblogs.com/sese/p/9765344.html .2018

注意：在组件wxss中不应使用ID选择器、属性选择器和标签名选择器。

- 获取到bucket对象列表后的处理

  - 一次性获取list,重新标准化数组，增加类型字段
    判断最多含“/”的字符串，以此划分数组
    找出第一个含“/”,先划分第一层数组，
    自顶向下插入，自底向上组合

    最后一位是/必然是文件夹，步步迁移
    普通文件最后一次出现/，匹配之前的内容和上一步文件夹，并置入

    有max-keys限制？万一超出后信息必然缺失，继续调用？marker
    ~~为了反复调用getBUcket,规定每个文件必须位于文件夹下，即根目录没有文件~~

    
  - 每次点击都调用接口
    每次调用的请求参数Prefix需要记录
    最多提供二级目录的入口，
    防止多次快点击
    用户侧异常捕捉提示类使用微信界面API  需要大量数据长连接的使用loading反馈
    滑动地址栏，文件不会显示上去，直接跳到另一页
    
  - 根据类型区分前方图标，非文件夹类支持打开跳转
    图标项目完整后可以直接用后缀匹配
    主页是否可以显示
    文件打开类型
    文件列表排序
    不需要全局保存所有文件信息，只有打开后才需要请求当前文件所有相关信息：
      - 上传者
      - 修改时间
      - 下载量
      - 大小
      - 评价
      + 下载 :小文件支持下载预览，大文件返回临时外部下载链接
      + 预览打开 : 
    文件信息页是否需要写入组件内部还是由组件将文件信息传出，由外部页面展示
      - 写入组件内部
      - 使用外部样式新增页面
      不写入组件内部，可以使得组件使用更灵活，逻辑轻便，且外部样式容易调用

  组件
  初始化由页面完成，每次点击在组件内调用